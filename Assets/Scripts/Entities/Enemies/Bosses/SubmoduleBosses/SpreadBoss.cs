using UnityEngine;

public class SpreadBoss : SubBoss, IUpdatable
{
    [SerializeField] private Transform pivotTransform;
    [SerializeField] private float rotationAroundPivotSpeed;

    protected override void Awake()
    {
        base.Awake();
        UpdateManager.Instance.updates.Add(this);
    }

    public void FalseUpdate()
    {
        transform.RotateAround(pivotTransform.position, Vector3.up, rotationAroundPivotSpeed * Time.deltaTime);
    }

    public override void TakeDamage(float damage, Bullet.BulletType bType = Bullet.BulletType.None, bool showDamage = true)
    {
        _currentHp -= damage;
        
        if (showDamage)
            StartCoroutine(ShowDamage());
        
        if (_currentHp <= 0)
        {
            var player = LevelManager.Instance.GetPlayer();
            Destroy(player.gameObject);
            
            EventManager.Instance.Trigger("OnReturnedBoss", true, submoduleIndex);
        }
    }
}
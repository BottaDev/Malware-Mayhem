using UnityEngine;
using UnityEngine.SceneManagement;

public class LevelManager : MonoBehaviour
{
    public static LevelManager Instance = null;

    public GameObject spawnPosition;
    public GameObject playerSpawn;

    private bool _isLoadingScene;

    private void Awake()
    {
        if (Instance == null)
            Instance = this;

        if (playerSpawn != null && spawnPosition != null)
            Instantiate(playerSpawn, spawnPosition.transform.position, Quaternion.identity, transform);
    }

    private void Start()
    {
        AudioManager.Instance.Stop("MainMenu");
        AudioManager.Instance.Play("Level 1-1");
    }

    public void EndLevel()
    {
        _isLoadingScene = true;
        UIManager.Instance.StartFadeIn();
        
        AudioManager.Instance.Stop("Level 1-1");
        AudioManager.Instance.Stop("TresholdLife");
        AudioManager.Instance.Play("LoseLevel");
        Invoke(nameof(ShowLoseScene), 2f);
    }

    private void ShowLoseScene()
    {
        SceneManager.LoadScene("LoseScene");
    }
}

using MM.UI;
using UnityEngine;

namespace MM.Others
{
    public class MainMenuPlanetController : MonoBehaviour
    {
        #region Private Variables

        [SerializeField] private float sensitivity = 0.4f;

        private bool _canRotate;

        #endregion

        #region MonoBehaviour Functions

        private void OnMouseDrag()
        {
            if (!_canRotate)
            {
                return;
            }

            var xAxisRotation = Input.GetAxis("Mouse X") * sensitivity;
            var yaxisRotation = Input.GetAxis("Mouse Y") * sensitivity;

            // Use RotateAround for better rotation
            transform.Rotate(Vector3.down, xAxisRotation);
            transform.Rotate(Vector3.right, yaxisRotation);
        }

        private void OnMouseDown()
        {
            // Remove the level window if player rotates the planet
            MenuUIManager.Instance.ShowLevel(-1);
        }

        #endregion

        #region Public Functions

        public void SetCanRotate(bool canRotate)
        {
            _canRotate = canRotate;
        }

        #endregion
    }
}
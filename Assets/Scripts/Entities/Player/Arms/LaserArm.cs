using Sound;
using UnityEngine;

public class LaserArm : PlayerArm
{
    public GameObject laser;
    
    public override void MakeAction()
    {
        if (_currentFireRate <= 0)
            Shoot();
    }
    
    private void Shoot()
    {
        if (muzzleShotParticles != null)
        {
            var forward = transform.forward;
            
            var mz = Instantiate(muzzleShotParticles, shotSpawn.position + forward.normalized, Quaternion.identity);
            mz.transform.forward = forward.normalized;
            mz.transform.parent = shotSpawn;
        }

        Instantiate(laser, shotSpawn.position, shotSpawn.rotation);
        
        SubtractEnergy();
        
        _cameraShaker.ShakeCamera();
        
        AudioManager.Instance.PlayAudioClip(Sounds.SoundType.BasicShot, shotSpawn.position);

        _currentFireRate = fireRate;
    }
}

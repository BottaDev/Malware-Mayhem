using System.Collections;
using UnityEngine;

namespace MM.VFX
{
    /// <summary>
    /// Missile impact VFX
    /// </summary>
    public class ImpactVFXPlane : MonoBehaviour
    {
        #region Private Variables

        [SerializeField] private float duration = 0.5f;
        
        private Material _mat;

        #endregion


        #region MonoBehaviour Functions

        public void Start()
        {
            _mat = GetComponent<MeshRenderer>().material;
            StartCoroutine(DecreaseVFX());
        }

        #endregion


        #region Private Functions

        private IEnumerator DecreaseVFX()
        {
            var steps = 60;
            for (var i = 0; i <= steps; i++)
            {
                _mat.SetFloat("_Progress", i / (float)steps);
                yield return new WaitForSeconds(duration / steps);
            }

            Destroy(gameObject);
        }

        #endregion

    }
}
using UnityEngine;
using System.Collections;
using EZCameraShake;

public class BladerArm : PlayerArm
{
    [SerializeField] private GameObject cone;
    [SerializeField] private float attackDuration = 0.5f;

    private void OnEnable()
    {
        cone.SetActive(false);
    }

    public override void MakeAction()
    {
        if(this.enabled == false) return;
        if (_currentFireRate <= 0)
            Attack();
    }

    private void Attack()
    {
        StartCoroutine(nameof(MakeAttack));
        _currentFireRate = fireRate;
    }
    
    private IEnumerator MakeAttack()
    {
        cone.SetActive(true);
        SubtractEnergy();

        CameraShaker.Instance.ShakeOnce(magnitude, roughness, fadeIn, fadeOut);

        yield return new WaitForSeconds(attackDuration);
        
        cone.SetActive(false);
    }
}

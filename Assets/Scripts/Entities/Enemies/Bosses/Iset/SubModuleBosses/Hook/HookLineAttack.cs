using System.Collections;
using MM.Common;
using UnityEngine;

namespace MM.Entities.Enemies.Bosses.Iset.SubModuleBosses
{
    public class HookLineAttack : HookAttack
    {
        #region Private Variables
        
        [SerializeField] private Transform spawnPoint;
        [SerializeField] private float timeBetweenShots = 1f;

        #endregion

        #region Private Functions

        private IEnumerator SpawnShots()
        {
            for (var i = 0; i < totalBullets; i++)
            {
                var bullet = EnemyPoolManager.Instance.GetBossBullet(bulletType);
                
                var bulletTransform = bullet.transform;
                bulletTransform.position = spawnPoint.position;
                bulletTransform.rotation = spawnPoint.rotation;
                
                yield return new WaitForSeconds(timeBetweenShots);
            }
            
            _hookSubBoss.ResetTimer();
        }

        #endregion

        #region Public Functions

        public override void Shot()
        {
            StartCoroutine(nameof(SpawnShots));
        }

        #endregion
    }
}
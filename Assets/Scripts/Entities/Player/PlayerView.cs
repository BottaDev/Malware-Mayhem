using System;
using System.Collections;
using System.Collections.Generic;
using System.Linq;
using UnityEngine;

public class PlayerView : MonoBehaviour
{
    private PlayerModel _model;

    private void Awake()
    {
        _model = GetComponent<PlayerModel>();
    }

    public void ResetArm(Arm arm)
    {
        arm.gameObject.SetActive(false);
    }

    public void ShowAbsorptionEffect(Enemy closeEnemy, ParticleSystemForceField forceField)
    {
        var ap = Instantiate(closeEnemy.absortionParticles, closeEnemy.transform.position, Quaternion.identity);
        ap.SetUp(forceField, 1f);
    }
    
    public void ShowArm(List<PlayerModel.ArmsSet> armSets, int armSetIndex, int enabledArmIndex)
    {
        // Disable all arms
        foreach (var arm in armSets.SelectMany(armsSet => armsSet.arms))
        {
            ResetArm(arm);
        }

        // Enable the arm that is currently selected
        armSets[armSetIndex].arms[enabledArmIndex].gameObject.SetActive(true);
    }

    public void ShowDustVfx(float horizontalMovement, float verticalMovement)
    {
        if (horizontalMovement != 0 || verticalMovement != 0)
            Instantiate(_model.dustParticle, _model.particlePosition);
    }
}

using TMPro;
using UnityEngine;
using UnityEngine.UI;

public class OptionsManager : MonoBehaviourSingleton<OptionsManager>
{
    [SerializeField] private Slider volumeSlider;
    [SerializeField] private Toggle fullScreenToggle;
    [SerializeField] private TMP_Dropdown resolutionDropdown;
    
    private void Start()
    {
        volumeSlider.value = SaveFile.Instance.Settings.Sound;
        fullScreenToggle.isOn = SaveFile.Instance.Settings.FullScreen;
        resolutionDropdown.value = SaveFile.Instance.Settings.Resolution;
    }

    private void Update()
    {
        if (SaveFile.Instance.Settings.Sound != volumeSlider.value)
        {
            SaveFile.Instance.Settings.Sound = volumeSlider.value;;
            SaveFile.Save();
        }

        if (SaveFile.Instance.Settings.FullScreen != fullScreenToggle.isOn)
        {
            SaveFile.Instance.Settings.FullScreen = fullScreenToggle.isOn;
            SaveFile.Save();
        }

        if (SaveFile.Instance.Settings.Resolution != resolutionDropdown.value)
        {
            SaveFile.Instance.Settings.Resolution = resolutionDropdown.value;
            SaveFile.Save();
        }
    }
}

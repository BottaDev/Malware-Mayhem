using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class wallpathmoverBORRAR : MonoBehaviour
{
    public List<Transform> positions;
    public float speedValue = 1;
    public float delay = 1;

    float currentSpeed = 0;
    int currentPos = 0;
    bool stopped = false;

    bool first = true;

    private void Start()
    {
        currentSpeed = speedValue;
    }

    void Update()
    {
        transform.position += (positions[currentPos].position - transform.position) * currentSpeed;

        if(!stopped && Vector3.Distance(transform.position, positions[currentPos].position) < 1)
        {
            StartCoroutine(stop());
        }
    }

    IEnumerator stop()
    {
        currentSpeed = 0;
        stopped = true;

        yield return new WaitForSeconds(1);
        currentPos++;
        if (currentPos >= positions.Count)
            currentPos = 0;
        currentSpeed = speedValue;

        if (first)
        {
            positions.RemoveAt(0);
            currentPos = 0;
            first = false;
        }

        yield return new WaitForSeconds(1);
        stopped = false;
    }
}

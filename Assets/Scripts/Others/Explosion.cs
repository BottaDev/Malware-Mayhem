using MM.Bullets;
using UnityEngine;

namespace MM.Gameplay
{
    public class Explosion : MonoBehaviour
    {
        #region MonoBehaviour Functions

        private void Awake()
        {
            Destroy(gameObject, 1f);
        }

        private void OnTriggerEnter(Collider other)
        {
            if (other.gameObject.layer is 8)
            {
                var entity = other.GetComponent<Entity>();
                entity.KillEntity();
            }

            if (other.gameObject.layer is 10 or 11)
            {
                var bullet = other.GetComponent<Bullet>();
                bullet.ForceReturnToPool();
            }

            if (other.gameObject.layer is 9)
            {
                var player = other.GetComponent<Entity>();
                player.TakeDamage(player.hp - 1);
            }
        }

        #endregion
    }
}
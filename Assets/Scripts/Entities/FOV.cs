using UnityEngine;

namespace MM.Entities
{
    public class FOV : MonoBehaviour
    {
        #region Private Variables
        [SerializeField] private LayerMask obstacleMask;
        #endregion
        
        #region Public Functions
        /// <summary>
        /// Checks if there is an obstacle between the enemy and the target
        /// </summary>
        /// <param name="targetPos"></param>
        /// <param name="range"></param>
        /// <returns>Returns true if there's an obstacle</returns>
        public bool CheckMiddleObstacle(Vector3 targetPos)
        {
            var dirToTarget = targetPos - transform.position;
        
            if (dirToTarget.magnitude <= 999)
            {
                if (Physics.Raycast(transform.position, dirToTarget, dirToTarget.magnitude,
                        obstacleMask))
                    return true;
            }
        
            return false;
        }
        
        public LayerMask GetObstacleMask()
        {
            return obstacleMask;
        }
        #endregion
    }
}

using UnityEngine;

public class LaserArm : PlayerArm
{
    public GameObject laser;
    
    public override void MakeAction()
    {
        if (_currentFireRate <= 0)
            Shoot();
    }
    
    private void Shoot()
    {
        if (muzzleShotParticles != null)
        {
            print("muzzleshot: " + muzzleShotParticles);
            GameObject mz = Instantiate(muzzleShotParticles, shotSpawn.position + transform.forward.normalized, Quaternion.identity);
            mz.transform.forward = transform.forward.normalized;
            mz.transform.parent = shotSpawn;
        }

        Instantiate(laser, shotSpawn.position, shotSpawn.rotation);
        
        SubtractEnergy();
        
        _cameraShaker.ShakeCamera();
        
        AudioManager.Instance.PlayAudioClip(Sounds.SoundType.BasicShot, shotSpawn.position);

        _currentFireRate = fireRate;
    }
}
